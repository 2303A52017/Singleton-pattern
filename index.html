<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BankServer Singleton Demo</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      color: #222;
    }
    header {
      background: linear-gradient(135deg, #3b82f6, #06b6d4);
      color: white;
      text-align: center;
      padding: 3rem 1rem;
    }
    header h1 { margin: 0; font-size: 2.2rem; }
    header p { font-size: 1.1rem; }

    main {
      max-width: 800px;
      margin: 2rem auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 { margin-top: 0; color: #334155; }

    button {
      background: #3b82f6;
      border: none;
      padding: 0.7rem 1.2rem;
      margin: 0.3rem;
      border-radius: 6px;
      color: #fff;
      cursor: pointer;
      font-size: 1rem;
    }
    button:hover { background: #2563eb; }

    pre {
      background: #111827;
      color: #22c55e;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
    }

    #log {
      background: #000;
      color: #0f0;
      font-family: monospace;
      padding: 1rem;
      height: 180px;
      overflow-y: auto;
      border-radius: 6px;
    }

    footer {
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      color: #666;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Banking App â€“ Singleton Pattern</h1>
    <p>Only one BankServer instance exists across the system</p>
  </header>

  <main>
    <h2>BankServer Singleton</h2>
    <button onclick="getBankServer()">Get Instance</button>
    <button onclick="processTransaction()">Process Transaction</button>
    <pre id="bankOutput">// Output will appear here</pre>

    <h2>Log Console</h2>
    <div id="log"></div>
  </main>

  <footer>
    &copy; 2025 Singleton Pattern Demo
  </footer>

  <script>
    // ---------- Logger ----------
    const logEl = document.getElementById("log");
    function log(msg) {
      logEl.innerHTML = `[${new Date().toLocaleTimeString()}] ${msg}<br>` + logEl.innerHTML;
    }
    function idOf(obj) {
      if (!obj.__id) obj.__id = Math.floor(Math.random() * 1e6);
      return obj.__id;
    }

    // ---------- BankServer Singleton ----------
    const BankServer = (function() {
      let instance; // private static reference
      function create() {
        return { createdAt: new Date().toLocaleString() };
      }
      return {
        getInstance: function() {
          if (!instance) {
            instance = create();
            log("New BankServer instance created.");
          }
          return instance;
        }
      };
    })();

    // ---------- UI Handlers ----------
    function getBankServer() {
      const server = BankServer.getInstance();
      document.getElementById("bankOutput").textContent =
        "BankServer instance id=" + idOf(server) + "\n" +
        JSON.stringify(server, null, 2);
      log("BankServer fetched (id=" + idOf(server) + ")");
    }

    function processTransaction() {
      const server = BankServer.getInstance();
      const tx = "TX-" + Math.floor(Math.random()*10000);
      log("Processing " + tx + " using BankServer id=" + idOf(server));
    }
  </script>
</body>
</html>

